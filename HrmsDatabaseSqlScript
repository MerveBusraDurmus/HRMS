
CREATE TABLE public.users(
	id int NOT NULL GENERATED ALWAYS AS IDENTITY (INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1),
	email character varying(100) not null,
	password character varying(100) not null,
	create_date timestamp with time zone NOT NULL,
	active boolean NOT NULL,
	CONSTRAINT pk_users PRIMARY KEY(id),
	CONSTRAINT uc_users_email UNIQUE(email)
);
CREATE TABLE public.employees(
	user_id int not null,
	first_name character varying(50) not null,
	last_name character varying(50) not null,
	CONSTRAINT pk_employees PRIMARY KEY(user_id),
	CONSTRAINT fk_employees_users FOREIGN KEY(user_id) REFERENCES public.users(id)
);
CREATE TABLE public.job_seekers(
	user_id int NOT NULL,
	first_name character varying(50) NOT NULL,
	last_name character varying(50) NOT NULL,
	identity_number character varying(11) NOT NULL,
	birth_year date NOT NULL,
	CONSTRAINT pk_job_seekers PRIMARY KEY(user_id),
	CONSTRAINT fK_job_seekers_users FOREIGN KEY(user_id) REFERENCES public.users(id),
	CONSTRAINT uc_job_seekers_identity_number UNIQUE(identity_number)
);

CREATE TABLE public.employers(
	user_id int NOT NULL,
	company_name character varying(100) NOT NULL,
	website character varying(100) NOT NULL,
	phone character varying(15) NOT NULL,
	CONSTRAINT pk_employers PRIMARY KEY(user_id),
	CONSTRAINT fk_employers_users FOREIGN KEY(user_id) REFERENCES public.users(id)
);
CREATE TABLE public.verification_codes(
	id integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
	user_id integer NOT NULL,
	activation_code character varying(200) NOT NULL,
	email character varying(100) NOT NULL,
	active boolean NOT NULL,
	create_date timestamp with time zone NOT NULL,
	expiration_date timestamp with time zone NOT NULL,
	activation_date timestamp with time zone,
	CONSTRAINT pk_verification_codes PRIMARY KEY(id),
	CONSTRAINT fk_verification_codes_users FOREIGN KEY(user_id) REFERENCES public.users(id),
	CONSTRAINT uc_verification_codes_activation_code UNIQUE(activation_code)
);
CREATE TABLE public.employee_confirms(
	id INT GENERATED BY DEFAULT AS IDENTITY (INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1),
	employee_id INT NOT NULL,
	is_confirmed BOOLEAN NOT NULL,
	create_date timestamp with time zone NOT NULL,
	confirm_date DATE,
	active boolean NOT NULL,
	CONSTRAINT pk_employee_confirms PRIMARY KEY(id),
	CONSTRAINT fk_employee_confirms_employee_id FOREIGN KEY(employee_id) REFERENCES public.employees(user_id)
);
CREATE TABLE public.employee_confirm_employers(
	employee_confirm_id INT NOT NULL,  (employee_confirm tablosundan miras aldığı için hem primary key hem foreign key)
	employer_id INT NOT NULL,
	CONSTRAINT pk_employee_confirm_employers PRIMARY KEY(employee_confirm_id),
	CONSTRAINT fk_employee_confirm_employers_employee_confirms FOREIGN KEY(employee_confirm_id) REFERENCES public.employee_confirms(id),
	CONSTRAINT fk_employee_confirm_employers_employers FOREIGN KEY(employer_id) REFERENCES public.employers(user_id)
);
CREATE TABLE public.job_positions
(
    	id INT NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
   	 title character varying(50) NOT NULL,
   	 create_date timestamp with time zone NOT NULL,
    	active boolean NOT NULL,
    	CONSTRAINT pk_job_positions PRIMARY KEY(id)
);
